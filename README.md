
Выполняющий: **Битюгов Алексей Сергеевич**, **БПИ217**

Реализовано 2 отдельных микросервиса (каждый отдельный Spring-проект):
1) [UserManager](https://github.com/axhse/SD-HW-4/tree/main/UserManager)
2) [Cafe](https://github.com/axhse/SD-HW-4/tree/main/Cafe)

**Cafe** делает запросы в **UserManager**, чтобы получить данные аутентифицированного пользователя  
Поэтому, для работы **Cafe** требуется запустить и **UserManager**  
(можно запустить как 2 ItelliJ проекта)  
**UserManager** работает на порту **8901**, **Cafe** на **8902**  
Таким образом, **UserManager** является SSO

Все API подробно описано в [коллекции Postman](https://github.com/axhse/SD-HW-4/tree/main/CafeAPIcollection.json) с учетом всех передаваемых параметров

### UserManager

1. Регистрация пользователя

Для регистрации используется endpoint `/user/create`  
Предоставляемые пользователем данные проверяются  
Роль выбирается самим пользователем (для тестирования такой вариант проще)  
В теле ответа содержится сообщение с результатом ответа  

2. Вход пользователя

Используется endpoint `/user/create`  
Также проверяются данные и возвращаются сообщения  
В случае успеха возвращается и jwt-token (в заколовке и в теле),  
который нужно указывать в заголовке авторизации при последующих запросах  
(можно определить в переменной Postman-коллекции)  
 
3. Предоставление информации о пользователе  

Информацию о текущем аутентифицированном пользователе можно получить в `/user/current`  
Информацию о любом пользователе можно получить в `/user/get`  

### Cafe

1. Создание заказов

Заказы может создавать любой аутентифицированый пользователь в `/cafe/order/create`  

2. Обработка заказов

Обработчик заказов [OrderCompleter](https://github.com/axhse/SD-HW-4/tree/main/Cafe/src/main/java/org.example/cafe/service/OrderCompleter.java) вызывается сразу после создания заказа  


3. Предоставление информации о заказе

Информацию о заказе можно получить в `/cafe/order/get`  

4. Управление блюдами

Для блюд реализовано CRUD-API, доступное пользователям-менеджерам  
 • `/cafe/dish/create` — создание  
 • `/cafe/dish/get` — получение данных  
 • `/cafe/dish/update` — обновление  
 • `/cafe/dish/delete` — удаление  

5. Получение меню

Для получения списка всех достпуных на текущий момент блюд можно воспользоваться `/cafe/menu`  

### Критерии

Таким образом, реализованы:  

1. Микросервис управления пользователями  
    1.1. Регистрация пользователя  
    1.2. Вход пользователя в систему  
    1.3. Выдача информации о пользователе  

2. Микросервис кафе  
    2.1. Управление заказами  
    2.2. Управление блюдами  
    2.3. Предоставление информации о меню  

3. Реализована Postman-коллекция, демонстрирующая и описывающая все API  

4. Код и документация  
    4.1. Качество кода  
		В обоих проектах выделены группы объектов:
		 • /api/message — модели сообщений ответов  
		 • /api/model — модели данных ответов  
		 • /api/params — модели параметров запросов  
		 • /auth — реализация аутентификации  
		 • /controller — контроллеры  
		 • /model — доменные модели  
		 • /repository — хранилища данных  
		 • /service — используемые сервисы  
		Все сервисы вызываются посредством Dependency Inversion, что делает систему более гибкой к изменениям  

    4.2. Документация
	В проектах микросервисов задокументированы все определяемые сущности  
	Параметры API для всех endpoint описаны в документации внутри Postman-коллекции  
